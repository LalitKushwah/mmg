<ion-header>
  <ion-navbar hideBackButton="true">
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
      <ion-title>{{partyName}}</ion-title>
      <ion-buttons end>
        <button ion-button icon-only (click)="presentPopover($event)">
          <ion-icon name="more" ></ion-icon>
        </button>
      </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content class="full-background">
  <button ion-button full padding class="salesmanDashboardBtn" (click)="openCustomerPaymentHistory()"
      [ngClass]=" customerDashboard ? 'item-hidden': 'item-visible'">
      View Customer Payments
  </button>

  <!-- <button ion-button  padding class="customerdashboardBtn" (click)="openPaymentModal()">
    Add Payment
  </button>
  <button ion-button  padding class="customerdashboardBtn" (click)="openShopPage()">
    Shop
  </button> -->

  <ion-card class="tabs-wrapper">
      <ion-card-header class="card-title">
        <!-- TARGET vs ACHIEVEMENT -->
        <!-- <ion-icon></ion-icon> -->
        <ion-item class="switchCategory">
          <ion-label>TARGET vs ACHIEVEMENT</ion-label>
            <ion-select placeholder="Total"  interface="popover">
                <ion-option selected="true" value="total" (ionSelect)="totalCategorySelected()">Total</ion-option>  
                <ion-option *ngFor="let category of categoryList" [value]="category" (ionSelect)="targetCategorySelectionChanged(category)">{{category.name}}</ion-option>
            </ion-select> 
          </ion-item>
      </ion-card-header>
      
          <ion-row>
            <ion-col class="tabs" align-items-center>
                <p class="tab-label-sm" align-items-center>
                  Target
                </p>
                <p class="tab-label-lg" align-items-center>
                  {{data.target | number: '.2'}}
                </p>
            </ion-col>
            <ion-col class="tabs">
                <p class="tab-label-sm">
                    MTD Achieved
                  </p>
                  <p class="tab-label-lg">
                    {{data.achievement | number: '.2'}}
                </p>
            </ion-col>
          </ion-row>

          <ion-row>
              <ion-col class="tabs">
                  <p class="tab-label-sm">
                    % Achieved
                  </p>
                  <p class="tab-label-lg">
                    {{data.achievedPercentage}}%
                  </p>
              </ion-col>
              <ion-col class="tabs">
                  <p class="tab-label-sm">
                      Balance To Do
                    </p>
                    <p class="tab-label-lg">
                      {{data.balanceToDo | number: '.2'}}
                  </p>
              </ion-col>
            </ion-row>

            <div>
                <ion-row>
                  <div>
                      <canvas #pieCanvas style="width: 100%"> </canvas>
                  </div>
                </ion-row>
              </div>

            <ion-row class="targetBottom">
              <p class="targetFootnote">*MTD: Month Till Date</p>
              <!-- <p class="toggleView" (click)="toggleView()">
                  <ion-icon slot="start" name="podium"></ion-icon>
                Visualize Data
              </p> -->
            </ion-row>
  </ion-card>

  <ion-card class="tabs-wrapper">
      <ion-card-header class="card-title">
        OUTSTANDING
      </ion-card-header>
      
          <ion-row>
            <ion-col class="tabs">
                <p class="tab-label-sm">
                    Total Credit Limit
                </p>
                <p class="tab-label-lg">
                  {{data.creditLimit | number: '.2'}}
                </p>
            </ion-col>
            <ion-col class="tabs">
                <p class="tab-label-sm">
                    Total Outstanding
                  </p>
                  <p class="tab-label-lg">
                    {{data.currentOutStanding | number: '.2'}}
                </p>
            </ion-col>
          </ion-row>

          <ion-row *ngIf="data.thirtyDaysOutStanding !== undefined">
              <ion-col class="tabs">
                  <p class="tab-label-sm">
                      > 30- Days Outstanding
                  </p>
                  <p class="tab-label-lg">
                    {{data.thirtyDaysOutStanding | number: '.2'}}
                  </p>
              </ion-col>
              <ion-col class="tabs">
                  <p class="tab-label-sm">
                      Available Credit Limit
                    </p>
                    <p class="tab-label-lg">
                      {{data.availableCreditLimit | number: '.2'}}
                  </p>
              </ion-col>
            </ion-row>
  </ion-card>

  <ng-container *ngIf="loggedInUser && loggedInUser['userType'] !== 'CUSTOMER'">
    <button ion-button full (click)="moveToStatements()">View Statements</button>
  </ng-container>

  <!-- <ion-card class="tabs-wrapper" *ngIf="data.tkPoints !== undefined">
      <ion-card-header class="card-title">
        TK CURRENCYs
      </ion-card-header>
      
          <ion-row>
            <ion-col class="tabs">
                <p class="tab-label-sm">
                  Total TK Points
                </p>
                <p class="tab-label-lg">
                  {{data.tkPoints | number: '.2'}}
                </p>
            </ion-col>
            <ion-col class="tabs">
                <p class="tab-label-sm">
                    Total TK Currency
                  </p>
                  <p class="tab-label-lg">
                    {{data.tkCurrency | number: '.2'}}
                </p>
            </ion-col>
          </ion-row>
  </ion-card> -->

</ion-content>
<ion-footer>
  <button ion-button  padding class="customerdashboardBtn btn-left" (click)="openPaymentModal()"><ion-icon name="cash"></ion-icon>Add Payment</button>
  <button ion-button  padding class="customerdashboardBtn" (click)="openShopPage()"><ion-icon name="cart"></ion-icon>Place Order</button>
</ion-footer>
